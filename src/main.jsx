/* eslint-env node */
import 'antd/dist/antd.css'
import './styles.css'

import { createRoot } from 'react-dom/client'
import { init, WASMClient, SocketIOClient } from '@buerli.io/classcad'
import { elements } from '@buerli.io/react'
import { Measure } from '@buerli.io/react-cad'

import App from './App'

// eslint-disable-next-line no-undef
const classcadWasmKey =
  'MS4xLlZZUG51VkNpOGdjQm50RXB0VkE1RnQ1ekVVazNOR1dYMk9weHlxRGJjazRSdGYwTFRPTFl5NVdjYmY4VnFOOXlWTDQ0OUNzSExTbmhQRHZpNEVidXRuN2RwNkxWTnV2MFRablJKdDg0UkNqRGYrT3VhUnJnRU5VUGI3YnUzbmxMMHdnUGZYL1pvcWlSTnpwbjRXRlN6dlVoOHkwV0VCQms4Y1hwdzhHYlJ0RnBFOGRLRnR6VERFdEVVMnN2N21JeCtNcmhjL2tPcjJsNjZYMFh2MzhZREVKVTZIbC81ZEVPK25EYTdwK2dSZE90akdIK0hXZnV3RnYvUUZDRUp6NzYrbE1hRDBBMTFEV2dzckdvU2tqMGZFekRNNkxaT2tUNUxlSzhZbmYzZk5kM0VDSUJxNyttbWIwcVZGM0dtbjBhRXBYZDZBeHhCTTNSb3Btc005UEEwWnlHRmhsWFZmSVhVU094NmFIbFVOSE4rUjhsM3BUWndJYXMzdHBMSml6ZXZHcFRvQlpJQWhrYm9yVkIyam53QUpibkxER2dSWndibHNZQmkxT0pPK2srbGI1NzFhcmx0YU9RRFcyb2NSeEM0ekoxRjh3Q2hQNnVXbmYzcTBWNXRiOWg5RVRHRG9RUXRBbTU0VnlhKzdVRXlmOEV2UlQwQ2gvaE9sL1NBYjNoall0VG9aK1pEcFNxSm9jOUNpNzBZOXZRK2JUVnN1aGpaZGVqS3BpMXlSK0N6UTNuWms2TkFvM0dKWE9ualhlQnoyYTFHOWQ3OTJ1aVZJQ0RUcGREQlVWdjVpZ0tyTEJHZGIwV1o5aTZaaG42RnhlaUQwTG11aG1vTTR2U1ZaSzMxWXh3ZGFKK0h0eEg5VGxEUS8zbFRwUUhzYlhLTUV4ZmVUbG9TVEM1VWlrQ2kzMVBiS2JwUC9kcG1JZEhuWDJ5THNwcEVMaW5RYmhOYjZwWHVYQmhXMnIzMGJZOVpWd000NjhxTTZyem1hWGFwSGZUVW5OVTFpWkVlbDdlakVuTDRucnVkdi9MR3ljeHdweGNBY0NqMk4zdkNpS2UvQmp4cGdGNXpRNjJEMmJYcGNybGFiN3hWMEN2SEhuUnhNVlB0cThDeHRINGtzY2F1OElJRTRUZWFGK0lTVnVHbHhVQmJGdDNieWNNS2VpUkpiOVQybGJpTkRBdUxsK1d2T3hTdzZ0TE9SaUlrT3pWVkhER0hxM2R1WUoyUDhkRVoxbFJhQ0djRGFPZWNpN3dmU25WRm02WGRSb01WOFcwckdEUXQxcWszQVhOUkNZNjdVR3RMVlpYVE9XajZ4c2I3dVVDUzYrTFlqSmdtT2g2aVRiSmxtempLZVVFMDNYOTBmNmNxaHJFa0tIVW8rM0N1M0p4QlhUVTkzVGJBM1NaYXN6UG9lNWcxWUVYRnA5OU0vaWhBQ3hjY0t3SnB2WndjOGN4cGxpV2Z6SGtqVC8xUndteDVMaXpjM3BHNE1Zem1wM2JvbnkzV05POVFXWkczV2lCbHVCRjdpTzlLZmFoeFprUVZ3K0duUTBVa1dlaFpzQzJ5b0ZpOStjS0ZnMmZQNElOUEZhOUZEazdmOHZlVjZCRkdEWWxTVlNqWmdjK1RYOWcrV3pQNjlQWDVBMGpydFNLeE1mcDZhbk5tUXRWdCtGbkcyeFoxY1VnVEZ0S0Z4UG9zaHkyZ0RIUnNVQ0F5OWxCUzBERmk4WWdtaWg5N3crbDFhOFFlMTEwY0k4RFE4M0V4TmxDN0p0SStUcHJVd2IxMzVNbVlUdHN6YUZqUkQzVVliR1l4WnF6SHI1WXhRUnNBNGdRT3l6RnA0eHhUTlFUU01ZbEpkZDRNZjlXT2hJQXhEc2l1dFlJdFN3eEVnWjNhd0Q3UjdhMXduVWxtaVl6a054ZmtFV2lwOXZJNHlWdVdIN2ZOaWN6dHRLUUpnUUNGV2V1b0laYWZXS2FYYjg3Y1JIaytmbzMxNWhoeGdEWTlzcHBVTEdQTGI3cXg5NXRjeGhaOXFiRnFoTVJIb3VnbVI4WndMM0ZvTWk2RFFpa1VhVlBVTW1lSTlVNjQrR0dHWFBhakRrOFhUYi9xUU5RTW4xZ21UUUwyTG89'
// eslint-disable-next-line no-undef
const socketIoUrl = SOCKETIO_URL

init(
  id => {
    if (classcadWasmKey) {
      return new WASMClient(id, { classcadKey: classcadWasmKey })
    } else {
      return new SocketIOClient(socketIoUrl, id)
    }
  },
  { globalPlugins: [Measure], elements },
)

createRoot(document.getElementById('root')).render(<App />)
